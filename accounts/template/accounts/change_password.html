{% extends 'base.html' %}
{% load widget_tweaks %}
{% load extra_tags %}

{% block title %}Change password{% endblock %}

{% block header %}Change password {% endblock %}

{% block content %}
    <form action="{% url 'accounts:change_password' %}" method="post" class="d-flex flex-column justify-content-center align-items-center"
          style="flex-grow: 1">
        {% csrf_token %}
        <div class="d-flex align-items-center mb-4" style="margin-right: 39px">
            <button type="button" class="border-0 p-0 me-3" style="background: transparent" onclick="window.history.back()">
                <img src="/media/icons/back.png" alt="back" class="back-arrow">
            </button>
            <h1>Change password</h1>
        </div>
        <div class="form-floating w-25 mb-3">
            {% if not form.old_password.errors %}
                {% render_field form.old_password placeholder=form.old_password.label class+="form-control form-field" id=form.old_password.id_for_label %}
            {% else %}
                {% with "invalid-"|addstr:form.old_password.id_for_label as aria %}
                    {% render_field form.old_password placeholder=form.old_password.label class+="form-control form-field is-invalid" id=form.old_password.id_for_label aria-describedby=aria %}
                {% endwith %}
            {% endif %}
            <label for="{{ form.old_password.id_for_label }}">{{ form.old_password.label }}</label>
            {% if form.old_pssword.errors %}
                <div id="invalid-{{ form.old_password.id_for_label }}" class="invalid-feedback">
                    {% for error in form.old_password.errors %}
                        {{ error }}<br>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
        <div class="form-floating w-25 mb-3">
            {% if not form.new_password1.errors %}
                {% render_field form.new_password1 placeholder=form.new_password1.label class+="form-control form-field" id=form.new_password1.id_for_label %}
            {% else %}
                {% with "invalid-"|addstr:form.new_password1.id_for_label as aria %}
                    {% render_field form.new_password1 placeholder=form.new_password1.label class+="form-control form-field is-invalid" id=form.new_password1.id_for_label aria-describedby=aria %}
                {% endwith %}
            {% endif %}
            <label for="{{ form.new_password1.id_for_label }}">{{ form.new_password1.label }}</label>
            {% if form.new_password1.errors %}
                <div id="invalid-{{ form.new_password1.id_for_label }}" class="invalid-feedback">
                    {% for error in form.new_password1.errors %}
                        {{ error }}<br>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
        <div class="form-floating w-25 mb-3">
            {% if not form.new_password2.errors %}
                {% render_field form.new_password2 placeholder=form.new_password2.label class+="form-control form-field" id=form.new_password2.id_for_label %}
            {% else %}
                {% with "invalid-"|addstr:form.new_password2.id_for_label as aria %}
                    {% render_field form.new_password2 placeholder=form.new_password2.label class+="form-control form-field is-invalid" id=form.new_password2.id_for_label aria-describedby=aria %}
                {% endwith %}
            {% endif %}
            <label for="{{ form.new_password2.id_for_label }}">{{ form.new_password2.label }}</label>
            {% if form.new_password2.errors %}
                <div id="invalid-{{ form.new_password2.id_for_label }}" class="invalid-feedback">
                    {% for error in form.new_password2.errors %}
                        {{ error }}
                    {% endfor %}
                </div>
            {% endif %}
        </div>
        <div class="d-flex mb-3">
            <button type="button" onclick="window.history.back()"
                    class="submit rounded-pill ms-auto me-3 text-decoration-none">Cancel</button>
            <input type="submit" name="confirmed" value="Confirm" class="submit rounded-pill me-auto ms-3">
        </div>
    </form>
{% endblock %}